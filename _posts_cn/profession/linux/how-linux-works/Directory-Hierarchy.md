---
title: Linux是如何工作的--目录结构
tags:
  - Linux是如何工作的
  - Linux
  - Linux 内核
date: 2019-03-04
---

## Linux 系统总览

> 本文所总结的内容都来自于： **[《How Linux Works》](https://www.amazon.com/How-Linux-Works-2nd-Superuser/dp/1593275676/ref=sr_1_1?keywords=how+linux+works&qid=1551169061&s=gateway&sr=8-1)**.

我们先简单看一下Linux系统下的目录层级。

![Linux directory hierarchy](https://sherlockblaze.com/resources/img/profession/linux/how-linux-works/linux-directory-hierarchy.png)

上面的图片简单展示了一下Linux系统的目录层级。简单展示了 `/`，`/user`，和 `/var` 目录下的内容。注意一下，**`/usr`目录下的内容和根目录下的内容基本相同。**

下面列出了根目录下基本比较重要的目录：

- `/bin`：这个目录包含了一些可运行的二进制文件，比如一些常用的命令 `ls` 还有 `cp`。大多数在 `/bin` 目录下的程序都是二进制文件，但是在现代操作系统中，有一些可能是shell脚本。
- `/dev`： 包含所有的设备文件。
- `/etc`： 这里面是系统的一些核心配置，比如说用户密码，设备，网络和一些配置文件。`/etc` 目录里有很多东西跟硬件是对应的，比如`/etc/X11`对应的就是你机器的显卡以及相应的系统配置。 
- `/home`： 为一般用户保留一些个人文件。绝大多数类Unix系统都会有这个习惯。
- `/lib`： 里面存放库文件，可以被一些可执行文件使用。一般有两种：**静态**和**共享**。**`/lib`目录下应该只包含共享库**，但是其他的 lib 目录，比如 `/usr/lib` 目录，两种都有，甚至会有其他一些辅助文件。
- `/proc`： 通过一些可浏览的文件和目录，提供一些系统的统计信息。一般来说此目录下的子目录结构是对无二的，此目录下一般存放一些当前运行着的进程相关的信息。
- `/sys`： 这个目录跟 `/proc` 目录的性质差不多，提供了一些设备和系统的接口。
- `/sbin`： 存放系统级别的可执行文件。放在这里面的可执行程序都是给系统管理员准备的，所以一般用户都不好意思直接用它。有很多好用的工具藏在里面，当你使用root权限来操作的时候，就能体验到它们的魅力了。
- `/tmp`： 这是一个用来存放较小的、临时的文件。这个目录下的内容对所有用户（root和普通用户）可读写，但是用户与用户之间是隔离的，一个用户不能访问另一个用户的文件。很多程序把这个目录当成一个工作站。关于这个目录，要注意不要把一些重要的文件放在里面，因为在系统启动的时候会清空里面的内容，甚至有些系统的实现会简单定期清理目录里的内容。虽然这么说，但是也不要把这个目录变成一个垃圾站，往里面乱塞东西，因为该目录的内容有时候会被一些关键的东西使用、共享。
- `/usr`： 这个目录里没有用户文件。相反，它包含一个大型目录层次结构，包括Linux系统的大部分内容。`/ usr` 中的许多目录名与根目录中的目录名相同（如 `/usr /bin` 和`/usr/lib`），它们拥有相同类型的文件。
- `/var`： 这个目录被程序用来存放一些运行时信息。系统日志，用户追踪日志、缓存等。

### 根目录下一些其他子目录

这里举例了一些根目录下的有趣子目录：

- `/boot`：这个目录下包含了内核启动时加载器用的文件。这些文件一般只在系统启动的第一阶段被使用。
- `/media`： 可移动硬盘之类的挂载点
- `/opt`： 这里面回访一些第三方软件。不过很多系统不用 `/opt` 目录。

### `/usr` 目录

乍一看 `/usr` 文件夹好像相对干净。但是你往深处看，比如 `/usr/bin` 和 `/usr/lib`，里面就有不少内容。`/usr` 目录存放了很多用户空间的程序和数据。我们从 `/usr/bin`、`/usr/sbin`、`/usr/lib` 和 `/usr` 这个目录深入点往下看：

- `/include`： 包含了C编译器使用的头文件
- `/info`： 包含 GNU 信息手册
- `/local`： 安装用户自己的软件的位置。
- `/man`： 包含手册
- `/share`： 包含应该在其他类型的Unix机器上运行而不会丢失功能的文件。 在过去，机器网络将共享此目录，但真正的`/share`目录变得罕见，因为现代磁盘上没有空间问题。 维护一个`/share`目录通常是痛苦的。

### 内核的位置

在Linux系统里，内核一般存放在 `/vmlinuz` 或者 `/boot/vmlinuz` 目录下。启动加载器在系统启动时加载这些文件。

一旦加载器加载完成，这些文件就不会再被使用了。你还可以找到很多模块，系统在运行过程中可以按需加载/卸载这些模块。这些都模块被称为可加载内核模块，一般存放在 `/lib/modules` 目录下。

### 推荐阅读

[Filesystem Hierarchy Standard](http://www.pathname.com/fhs/)